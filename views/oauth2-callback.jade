extends layout

block content
    
    ul.list-group
        a.li.list-group-item.active Fitbit
        a.li.list-group-item( href="/step/2016/5/12" ) Step
        a.li.list-group-item( href="/distance/2016/5/12" ) Distance
        a.li.list-group-item( href="/caloriesOut/2016/5/12" ) Calories out

    //a(class='button', href='/step') Step
    script(src='https://npmcdn.com/axios/dist/axios.min.js')
    script.

        Date.prototype.yyyymmdd = function () {
            var yyyy = this.getFullYear().toString();
            var mm = (this.getMonth() + 1).toString(); // getMonth() is zero-based
            var dd = this.getDate().toString();
            return yyyy + '-' + (mm[1] ? mm : "0" + mm[0]) + '-' + (dd[1] ? dd : "0" + dd[0]); // padding
        };

        function prepareParameters() {
            var d = new Date();
            var today = d.yyyymmdd();
            var params = document.location.href.split("#")[1].split("&");
            return {today: today, params: params};
        }

        //function getActivityToday() {
          //  var p = prepareParameters();
        function saveCrednetial(){
            var p = prepareParameters();
            var user_id = '';
            var token = '';

            p.params.forEach(function (e) {
                if ((e.split("="))[0] == 'user_id') {
                    user_id = e.split("=")[1];
                }
                else if ((e.split("="))[0] == 'access_token') {
                    token = e.split("=")[1];
                }
            });

            axios.post('/oauth2/saveCredentials',{token:token,user_id:user_id})
                    .then(function (response) {
                        console.log(response.data.message);
                    })
                    .catch(function (response) {
                        console.log(response);
                    });
        }

        saveCrednetial();
        //getActivityToday();//add